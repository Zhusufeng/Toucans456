{"version":3,"sources":["app.js","app.run.js","auth0-variables.js","controllers/InventoryCtrl.js","controllers/InventoryEntryCtrl.js","controllers/NavTest.js","controllers/PrimaryRecipeController.js","controllers/RecipeController.js","controllers/TouristCtrl.js","controllers/UploadRecipeCtrl.js","services/authService.js","services/mainService.js","components/inventory.js","components/inventoryEntry.js","components/main.js","components/nav.js","components/primaryRecipe.js","components/tourist.js","components/uploadRecipe.js"],"names":["angular","module","config","$stateProvider","$urlRouterProvider","$locationProvider","jwtOptionsProvider","angularAuth0Provider","touristState","name","url","component","controllerAs","primaryState","init","clientID","AUTH0_CLIENT_ID","domain","AUTH0_DOMAIN","responseType","redirectUri","AUTH0_CALLBACK_URL","audience","AUTH0_API_AUDIENCE","tokenGetter","localStorage","getItem","otherwise","hashPrefix","run","$rootScope","authService","auth","handleParseHash","controller","user","$scope","mainService","$state","vm","content","runUpload","handleSearchResults","query","search","recipes","$apply","console","log","handleClickHome","getRecipes","primaryRecipe","selectRecipe","recipe","id","getRecipe","resObj","data","tags","Tags","selectRecipePhotos","Photos","selectRecipeTags","map","cur","Tag","selectRecipeIsStarred","isStarred","selectRecipeTitle","title","$timeout","newRecipe","showFailModal","$","modal","showSuccessModal","handlePhotoSubmit","addedPhotos","element","document","querySelector","files","addedTags","getElementsByName","value","split","Title","length","uploadFileToUrl","trigger","tagsManager","hiddenTagListName","service","angularAuth0","authManager","login","authorize","parseHash","_idTokenVerification","err","authResult","idToken","setUser","logout","removeItem","setItem","accessToken","isAuthenticated","callback","axios","get","then","catch","params","responseObj","file","uploadUrl","fd","FormData","append","i","post","headers","error","getHomepage","primaryView","results","templateUrl","bindings","onClick","handlesearchresults","handleclickhome","photos","star"],"mappings":"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","file":"bundle.js","sourcesContent":["angular.module('app', ['auth0.auth0', 'ui.router', 'angular-jwt'])\n  .config(function($stateProvider, $urlRouterProvider, $locationProvider, jwtOptionsProvider, angularAuth0Provider) {\n\n    var touristState = {\n      name: 'tourist',\n      url: '/tourist',\n      component: 'tourist',\n      controllerAs: 'vm'\n    };\n\n    var primaryState = {\n      name: 'primary',\n      url: '/primary',\n      component: 'app',\n      controllerAs: 'vm'\n    };\n\n    // Initialization for the angular-auth0 library\n    angularAuth0Provider.init({\n      clientID: AUTH0_CLIENT_ID,\n      domain: AUTH0_DOMAIN,\n      responseType: 'token id_token',\n      redirectUri: AUTH0_CALLBACK_URL,\n      audience: AUTH0_API_AUDIENCE,\n    });\n    \n    // Configure a tokenGetter so that the isAuthenticated\n    // method from angular-jwt can be used\n    jwtOptionsProvider.config({\n      tokenGetter: function() {\n        return localStorage.getItem('id_token');\n      }\n    });\n    \n    $urlRouterProvider.otherwise('tourist');\n\n    // Remove the ! from the hash so that\n    // auth0.js can properly parse it\n    $locationProvider.hashPrefix('');\n\n  });\n\n// ///////// JWT /////////\n//     jwtOptionsProvider.config({\n//       //unauthenticatedRedirectPath: '/login',\n//       tokenGetter: function() {\n//         return localStorage.getItem('id_token');  //where does this come from\n//       },\n//       whiteListedDomains: ['127.0.0.1', 'localhost']\n//     });\n\n//     jwtInterceptorProvider.tokenGetter = function(store) {\n//       return store.get('id_token');\n//     }\n// ///////// REDIRECT /////////\n//     // redirect = function($q, $timeout, store, $location) {\n//     //   $timeout(function() {\n//     //     store.get('id_token');\n//     //     console.log('running timeout');\n//     //   })\n//     //   return {\n//     //     responseError: function(err) {\n//     //       if(err.status === 401) {\n//     //         console.log('There is an error: ', err);\n//     //         $location.path('/tourist');\n//     //       }\n//     //       return $q.reject(err);\n//     //     }\n//     //   }\n//     // }\n\n// ///////// REGISTERING STATES AND FUNCTIONS /////////\n//     $httpProvider.interceptors.push('jwtInterceptor');\n//     //$httpProvider.interceptors.push('redirect');\n\n//     $stateProvider.state(touristState);\n//     $stateProvider.state(primaryState);\n\n//   })\n//   .run(function($rootScope, $state, $location, jwtHelper, store) {\n//     $rootScope.$on('$locationChangeStart', function() {\n//       var token = store.get('id_token');\n\n//       if (token) {  //does this token exist?\n//         if (typeof token === 'object') {\n//           token = token.data;\n//         }\n//         if (jwtHelper.isTokenExpired(token) === false) {  //is it expired?\n//           console.log('Staying at primary');\n//           axios.defaults.headers.common.Authorization = 'Bearer ' + token;\n\n//           $location.path('/primary');  //head to the primary page\n//         } else {  //if it is expired head back to tourist page\n//           console.log('Going home to tourist');\n//           $location.path('/tourist');\n//         }\n//       } else {  //no token\n//         console.log('Going home to tourist');\n//         $location.path('/tourist');\n//       }\n//     });\n//   });\n","angular.module('app')\n\n  .run(function ($rootScope, authService) {\n    // Put the authService on $rootScope so its methods\n    // can be accessed from the nav bar\n    $rootScope.auth = authService;\n\n    // Process the auth token if it exists and fetch the profile\n    authService.handleParseHash();  \n  });","var AUTH0_CLIENT_ID = 'Zak43COwtpgU3Ei9vDiL8BX7fQc90iRx';\nvar AUTH0_DOMAIN = 'zhusufeng.auth0.com';\nvar AUTH0_CALLBACK_URL = 'http://localhost:8000/';\nvar AUTH0_API_AUDIENCE = 'angular';","angular.module('app').controller ('InventoryCtrl', function () {\r\n  \r\n});","angular.module('app').controller('InventoryEntryCtrl', function () {\r\n\r\n});","angular.module('app').controller ('NavTest', function () {\r\n  this.user = 'nav';\r\n});","angular.module('app').controller ('PrimaryRecipeController', function ($scope) {\r\n\r\n});","angular.module('app').controller('RecipeController', function ($scope, mainService, $state, authService) {\r\n  // Set up use with Auth0 Service\r\n  var vm = this;\r\n  vm.auth = authService;\r\n\r\n  ////////handle switch views via ng-if////////\r\n  this.content = true;\r\n  this.runUpload = () => {\r\n    this.content = false;\r\n  };\r\n\r\n\r\n  //////// search bar ////////\r\n  this.handleSearchResults = (query) => {\r\n    mainService.search({\r\n      query: query\r\n    }, function (recipes) {\r\n      $scope.recipes = recipes;\r\n      $scope.$apply();\r\n      console.log(recipes);\r\n    });\r\n  };\r\n\r\n\r\n  this.handleClickHome = () => {\r\n    this.content = true;\r\n    mainService.getRecipes(null, function (recipes) {\r\n      $scope.recipes = recipes;\r\n      $scope.primaryRecipe = recipes[0];\r\n      $scope.$apply();\r\n    });\r\n  };\r\n\r\n  //////// GET service for primary recipe ////////\r\n  this.selectRecipe = (recipe) => {\r\n    console.log(recipe.id);\r\n    $scope.primaryRecipe = recipe;\r\n\r\n    // retrieve photos and associated data //\r\n    mainService.getRecipe(recipe.id, function (resObj) {\r\n      console.log('Retrieved data', resObj.data);\r\n      var tags = resObj.data.Tags;\r\n\r\n      $scope.selectRecipePhotos = resObj.data.Photos;\r\n      $scope.selectRecipeTags = tags.map((cur) => cur = cur.Tag);\r\n      $scope.selectRecipeIsStarred = resObj.data.isStarred;\r\n      $scope.selectRecipeTitle = resObj.data.title;\r\n\r\n      $scope.$apply();\r\n    });\r\n  };\r\n\r\n  //////// recipe app initializion ////////\r\n  mainService.getRecipes(null, function (recipes) {\r\n    $scope.recipes = recipes;\r\n    $scope.primaryRecipe = recipes[0];\r\n\r\n    mainService.getRecipe($scope.primaryRecipe.id, function (resObj) {\r\n      console.log('Retrieved data', resObj.data);\r\n      var tags = resObj.data.Tags;\r\n\r\n      $scope.selectRecipePhotos = resObj.data.Photos;\r\n      $scope.selectRecipeTags = tags.map((cur) => cur = cur.Tag);\r\n      $scope.selectRecipeIsStarred = resObj.data.isStarred;\r\n      $scope.selectRecipeTitle = resObj.data.title;\r\n\r\n      $scope.$apply();\r\n    });\r\n  });\r\n\r\n  //////// allows user to logout ////////\r\n  // this.logout = () => {\r\n  //   console.log('Logging out');\r\n  //   axios.defaults.headers.common['Authorization'] = 'Bearer logged out';\r\n  //   store.remove('id_token');\r\n\r\n  //   $state.go('tourist');\r\n  // };\r\n\r\n});\r\n\r\n  //Checked kk","angular.module('app').controller('TouristCtrl', function ($scope, authService) {\r\n\r\n  // Set up use with Auth0 Service\r\n  $scope.auth = authService;\r\n\r\n  // console.log('Show me auth: ', auth);\r\n\r\n\r\n});","angular.module('app').controller('UploadRecipeCtrl', function ($scope, $timeout, mainService) {\r\n  this.newRecipe = {};\r\n  this.showFailModal = () => {\r\n    $(\"#myModalfailed\").modal('show');\r\n  };\r\n\r\n  this.showSuccessModal = () => {\r\n    $(\"#myModalsuccess\").modal('show');\r\n  };\r\n\r\n\r\n  this.handlePhotoSubmit = () => {\r\n    //Retrieves all files from angular component\r\n    var addedPhotos = angular.element(document.querySelector(\"#upload_field\"))[0].files;\r\n\r\n    //Retrieves all tags from angular component\r\n    var addedTags = angular.element(document.getElementsByName(\"yolo\"))[0].value;\r\n    this.newRecipe[\"Tags\"] = addedTags.split(\",\");\r\n    this.newRecipe[\"Photos\"] = addedPhotos;\r\n    console.log(\"MEMEMEMEMEMEMEMEMMEMEMEME\", this.newRecipe);\r\n\r\n    if (!!this.newRecipe.Title && addedPhotos.length !== 0) {\r\n      mainService.uploadFileToUrl(this.newRecipe, '/api/recipes');\r\n      this.showSuccessModal();\r\n    } else {\r\n      this.showFailModal();\r\n      return false;\r\n    }\r\n\r\n    $('#form_id').trigger(\"reset\");\r\n    $(\".tm-input\").tagsManager('empty');\r\n\r\n  };\r\n\r\n\r\n  $timeout(function () {\r\n    // code to execute after directives goes here\r\n    $(\".tm-input\").tagsManager({\r\n      hiddenTagListName: \"yolo\"\r\n    });\r\n  });\r\n});","angular.module('app').service('authService', function($state, angularAuth0, authManager) {\r\n\r\n  // LOGIN\r\n  // When user selects 'login', this will redirect to Auth0's\r\n  // hosted Lock, which is where user will put in credentials\r\n  function login() {\r\n    console.log('The login function was invoked');\r\n    angularAuth0.authorize();\r\n  }\r\n\r\n  // PARSE HASH\r\n  // When user successfully authenticates, this will parse the\r\n  // hash to get the idToken and accessToken\r\n  function handleParseHash() {\r\n    angularAuth0.parseHash(\r\n      {_idTokenVerification: false },\r\n      function(err, authResult) {\r\n        if (err) {\r\n          console.log('Error with parsing hash: ', err);\r\n        }\r\n        if (authResult && authResult.idToken) {\r\n          setUser(authResult);\r\n        }\r\n    });\r\n  }\r\n\r\n  // LOGOUT\r\n  // When user selects 'logout', this will destroy the\r\n  // accessToken and idToken\r\n  function logout() {\r\n    console.log('The logout function was invoked');\r\n    localStorage.removeItem('access_token');\r\n    localStorage.removeItem('id_token');\r\n  }\r\n\r\n  // SET USER\r\n  // Save user's id_token and access_token to localStorage\r\n  // Which configures successful log in\r\n  function setUser(authResult) {\r\n    localStorage.setItem('access_token', authResult.accessToken);\r\n    localStorage.setItem('id_token', authResult.idToken);\r\n  }\r\n\r\n  // IS AUTHENTICATED\r\n  // Checks if user is logged in by returning whether or not\r\n  // there is a id_token in localStorage\r\n  function isAuthenticated() {\r\n    return authManager.isAuthenticated();\r\n  }\r\n\r\n  return {\r\n    login: login,\r\n    handleParseHash: handleParseHash,\r\n    logout: logout,\r\n    isAuthenticated: isAuthenticated\r\n  };\r\n\r\n});","angular.module('app').service('mainService', function () {\n\n  this.getRecipes = function (config, callback) {\n    // --------------------FIX TO ADD USERNAME PARAMETER -stretch goal\n    //Look below at getPhotos method to find out how\n\n    axios.get('/api/recipes')\n      .then(function (recipes) {\n        callback(recipes.data);\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  };\n\n\n  this.getRecipe = function(config, callback) {\n      console.log('getPhotos config', config);\n      axios.get('/api/recipe', {params: {config}\n    })\n    .then(function(responseObj) {\n      console.log('Frontend GET photos success', responseObj);\n      callback(responseObj);\n    })\n    .catch(function(err) {\n      console.log('Frontend GET photos error', err);\n    });\n  };\n\n  // this.login = function (config, callback, failedAlert) {\n  //   console.log('login is running');\n  //   axios.get('/api/login', config)\n  //     .then(function (token) {\n  //       console.log('Frontend GET login success', token);\n  //       callback(token);\n  //     })\n  //     .catch(function (err) {\n  //       failedAlert();\n  //       console.log('This is the error form logn', err);\n  //     });\n  // };\n\n  // this.signUp = (config, callback, failedAlert) => {\n  //   console.log(config)\n  //   // post request to '/api/signup'\n  //   axios.post('/api/signup', config)\n  //     .then((token) => {\n  //       callback(token);\n  //     })\n  //     .catch((error) => {\n  //       failedAlert();\n  //       console.log(error);\n  //     });\n  // };\n\n  this.uploadFileToUrl = function(file, uploadUrl){\n    var fd = new FormData();\n    fd.append('title', file.Title);\n    fd.append('tags', file.Tags);\n\n    for(var i =0; i < file.Photos.length; i++){\n       fd.append('file', file.Photos[i]);\n    }\n   // console.log(fd.get(\"file\", file));\n   // console.log(fd.getAll(\"file\", file));\n\n\n    axios.post(uploadUrl, fd, {\n      headers: {'Content-type': 'multipart/form-data'}\n    })\n    .then(function(file) {\n      console.log('uploadFile sucess');\n    })\n    .catch(function(err) {\n      console.error(err);\n    });\n  };\n\n  this.getHomepage = function() {\n    axios.get('/primary')\n      .then((primaryView) => {console.log('GETHOMEPAGE PRIMARYVIEW', primaryView);})\n      .catch((error) => {});\n  };\n\n  this.search = function(config, callback) {\n    axios.get('/api/search', {\n      params: {\n        query: config.query\n      }\n    })\n    .then(function(results) {\n      callback(results.data);\n    })\n    .catch(function(err) {\n      console.log(err);\n    });\n  };\n\n});\n","angular.module('app').component('inventory', {\n\n  controller: 'InventoryCtrl',\n  templateUrl: 'views/inventory.html',\n  bindings: {\n    recipes: '<',\n    onClick: '<'\n  }\n\n});\n\n\n  //Checked KK","angular.module('app').component('inventoryEntry', {\n  \n  controller: 'InventoryEntryCtrl',\n  templateUrl: 'views/inventoryEntry.html',\n  bindings: {\n    recipe: '<',\n    onClick: '<'\n  }\n\n});\n\n  //Checked KK","angular.module('app').component('main', {\n\n  controller: 'RecipeController',\n  templateUrl: 'views/main.html'\n\n});\n\n\n//Checked KK","angular.module('app').component('navbar', {\n\n  controller: 'NavTest',\n  templateUrl: 'views/nav.html',\n  bindings: {\n    handlesearchresults: '<',\n    handleclickhome: '<',\n    logout: '<'\n  }\n\n});\n\n//Checked KK","angular.module('app').component('primaryRecipe', {\n\n  controller: 'PrimaryRecipeController',\n  templateUrl: 'views/primary-recipe.html',\n  bindings: {\n    recipe: '<',\n    photos: '<',\n    tags: '<',\n    star: '<',\n    title: '<'\n  }\n\n});\n\n//Checked KK","angular.module('app').component('tourist', {\n\n  controller: 'TouristCtrl',\n  templateUrl: 'views/tourist.html'\n\n});\n\n//Checked KK","angular.module('app').component('uploadRecipe', {\n  controller: 'UploadRecipeCtrl',\n  templateUrl: 'views/uploadRecipe.html',\n});\n\n//Checked KK"]}